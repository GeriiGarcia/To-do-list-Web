<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To Do List</title>

    <style>
        * {
            margin: 0;
            padding: 0;
        }
        
        body {
            text-align: center;
        }
        
        div {
            margin: 80px auto auto 80px;
            text-align: center;
        }
        
        .lista {
            margin: 100px auto;
            border-width: thin;
            border-color: black;
            border-style: solid;
            padding: 10px 30px 10px 30px;
            min-width: 500px;
            width: max-content;
            border-radius: 10px;
        }
        
        .tareas {
            text-align: left;
            margin: 10px auto;
            width: 220px;
            height: 50px;
            background-color: #d8dbe0;
            border-radius: 5px;
            cursor: pointer;
            color: #000000;
            text-align: center;
            border: none;
        }
        
        .Atareas {
            display: none;
            margin: 10px auto;
        }
        
        .tarea {
            display: flex;
            text-align: center;
            display: flex;
            margin: 10px auto;
            width: 50%;
        }
        
        #add {
            width: 20px;
            height: 20px;
            margin: 10px auto auto -100px;
        }
        
        input {
            display: none;
        }
        
        li {
            list-style-type: none;
            margin: 10px auto 10px auto;
        }


        
    </style>

    <script>
        let numListas = 0;


        function nuevaL(){
            let titulo = document.getElementById("tituloLista").value;
            if(titulo == "")
                titulo = "Lista";
            let nuevaLista = `<p>` + titulo + `<\p>
            <button onclick="pulsarAñadir(` + numListas.toString() + `);" class="tareas" id="añadirLista` + numListas.toString() + `">
                <input type = 'checkbox'>
                <span class = 'slider'></span>
                + Añadir Lista
            </button>

            <ul id="ListaTarea` + numListas.toString() + `">
                <li>
                    <div class="Atareas" id="añadirTarea` + numListas.toString() + `">
                        <input type="text" placeholder="Añadir tarea" class="tarea" id="myInput` + numListas.toString() + `">
                        <button id="add" onclick="añadirTarea(` + numListas.toString() + `);">+</button>
                    </div>
                </li>
            </ul>`;
            return nuevaLista;
        }

        function añadirNumLista() {
            numListas = numListas + 1;
            return numListas;
        }

        function pulsarAñadir(num) {
            clonar();

            if(num == 0)
            {
                aux = numListas;
                document.getElementById("añadirTarea" + aux.toString()).style.display = "flex";
                document.getElementById("añadirLista" + aux.toString()).style.display = "none";
            }
            else
            {
                document.getElementById("añadirTarea" + num.toString()).style.display = "flex";
                document.getElementById("añadirLista" + num.toString()).style.display = "none";
            }
        }

        function clonar() {
            var c = document.getElementById("lista0");
            var clon = c.cloneNode(true); //si es true se copia el sub arbol, osea todo el elemento entero
            añadirNumLista()

            c.innerHTML = nuevaL();
            var x = "lista";
            x.replace(x.length, '');
            x = x + numListas.toString();
            c.id = x;

            document.body.appendChild(clon);
        }

        function añadirTarea(num) {
            var li = document.createElement("li");
            var inputValue = document.getElementById("myInput" + num.toString()).value;
            var t = document.createTextNode(inputValue);
            li.appendChild(t);
            if (inputValue === '') {
                alert("You must write something!");
            } else {
                document.getElementById("ListaTarea" + num.toString()).appendChild(li);
            }
            document.getElementById("myInput" + num.toString()).value = "";

            var span = document.createElement("SPAN");
            /*var txt = document.createTextNode("\u00D7");*/
            span.className = "close";
            span.appendChild(txt);
            li.appendChild(span);

            for (i = 0; i < close.length; i++) {
                close[i].onclick = function() {
                    var div = this.parentElement;
                    div.style.display = "none";
                }
            }
        }
    </script>
</head>

<body>

    <div class="lista" id="lista0">
        <button onclick="pulsarAñadir(0);" class="tareas" id="añadirLista0">
            <input type = 'checkbox'>
            <span class = 'slider'></span>
            + Añadir Lista
        </button>
        <input type="text" placeholder="Titulo de lista" class="tarea" id="tituloLista">

        <ul id="ListaTarea0">
            <li>
                <div class="Atareas" id="añadirTarea0">
                    <input type="text" placeholder="Añadir tarea" class="tarea" id="myInput0">
                    <button id="add" onclick="añadirTarea(0);">+</button>
                </div>
            </li>
        </ul>
    </div>


</body>

</html>